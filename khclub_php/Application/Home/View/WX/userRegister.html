<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/html">
<head lang="en">
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta content="width=device-width,initial-scale=1.0,maximum-scale=1.0,user-scalable=no" id="viewport" name="viewport">
    <title>账号验证</title>
    <link rel="stylesheet" href="__PUBLIC__/css/share/userRegister.css">
    <script src="__PUBLIC__/js/jquery-1.8.1.min.js"></script>
    <script>
        onload = function(){
            var txts = box.getElementsByTagName("input");
            for(var i = 0; i<txts.length;i++){
                var t = txts[i];
                t.index = i;
                t.setAttribute("readonly", true);
                t.oninput=function(){
                    this.value=this.value.replace(/^(.).*$/,'$1');
                    var next = this.index + 1;
                    if(next > txts.length - 1) return;
                    txts[next].removeAttribute("readonly");
                    txts[next].focus();
                }
            }
            txts[0].removeAttribute("readonly");
        }

        var intervalCounter = 0;
        function hideToast()
        {
            var alert = document.getElementById("toast");
            alert.style.opacity = 0;
            clearInterval(intervalCounter);
        }

        function drawToast(message)
        {
            var alert = document.getElementById("toast");
            if (alert == null)
            {
                var toastHTML = '<div id="toast">' + message + '</div>';
                document.body.insertAdjacentHTML('beforeEnd', toastHTML);
            }
            else
            {
                alert.style.opacity = .9;
                alert.innerHTML = message;
            }
            intervalCounter = setInterval("hideToast()", 1000);
        }

        function save()
        {
            if($('#password').val().length < 1){
                drawToast("密码不能为空");
                return;
            }

            //submit
            var form = $("#form");
            form.attr("method", "GET");
            form.attr("action", "userRegister");
            form.submit();
        }
        var index = 60;//时间
        function start()
        {
            document.getElementById("timeSpan").innerHTML = index;
            document.getElementById("dates").style.display="block";
            index--;
            if(index < 0) {
                //清空定时器
                clearTimeout(t);
                document.getElementById("dates").style.display="none";
            }
            else {
                //开启计时
                var t = setTimeout("start()",1000);
            }

        }

    </script>
</head>
<body>
<form id="form">
    <input type="hidden" name="username" value="{$username}">
    <div class="ts">验证码已发送到您的手机,请注意查收并填写</div>
    <div class="clear" id="box">
        <div class="yzm1"><input type="text" name="yzm1" style="border-radius: 0; margin: 0;padding: 0; height:40px; width: 100%; font-size: 16px; text-align: center;" maxlength="1"/></div>
        <div class="yzm1"><input type="text" name="yzm2" style="border-radius: 0; margin: 0;padding: 0; height:40px; width: 100%; font-size: 16px; text-align: center;" maxlength="1"/></div>
        <div class="yzm1"><input type="text" name="yzm3" style="border-radius: 0; margin: 0;padding: 0; height:40px; width: 100%; font-size: 16px; text-align: center;" maxlength="1"/></div>
        <div class="yzm2"><input type="text" name="yzm4" style="border-radius: 0; margin: 0;padding: 0; height:40px; width: 100%; font-size: 16px; text-align: center;" maxlength="1"/></div>
    </div>
    <div class="box1 clear"><a href="#" class="get" onclick="start()">重新发送验证码</a><span id="dates"><span id="timeSpan">60</span>s 秒后</span></div>
    <div class="ts1">请填写密码</div>
    <div class="tel"><input type="text" id="password" name="password" style=" margin: 0;padding: 0 2% 0 2%; height:40px; width: 96%; font-size: 16px; border-radius: 3px;"/></div>
    <a onclick="save()" class="btn-submit"/>下一步</a>
</form>

</body>
</html>